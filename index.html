<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --mc: #ffd700; --sh: rgba(255, 215, 0, 0.4); }
        
        /* –£–±–∏—Ä–∞–µ–º —Å–∏–Ω–µ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ */
        * { -webkit-tap-highlight-color: transparent; outline: none; }

        body { background: #000; color: var(--mc); text-align: center; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        .particle { position: absolute; top: -20px; user-select: none; z-index: -1; animation: fall linear infinite; font-size: 22px; }
        @keyframes fall { to { transform: translateY(105vh) rotate(360deg); } }

        /* –ù–û–í–ê–Ø –ó–ê–°–¢–ê–í–ö–ê */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; display: flex; justify-content: center; align-items: center;
            z-index: 10000; transition: opacity 0.8s ease;
        }
        .loader-content {
            border: 4px solid var(--mc); padding: 20px 40px; border-radius: 20px;
            box-shadow: 0 0 30px var(--sh); animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 20px var(--sh); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px var(--sh); }
            100% { transform: scale(1); box-shadow: 0 0 20px var(--sh); }
        }
        #loading-screen.fade-out { opacity: 0; pointer-events: none; }

        .header { position: fixed; top: 0; width: 100%; height: 60px; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; z-index: 100; box-sizing: border-box; }
        .menu-btn, .sett-btn { font-size: 30px; cursor: pointer; color: var(--mc); filter: drop-shadow(0 0 5px var(--sh)); }
        
        .side-panel { position: fixed; top: 0; width: 280px; height: 100%; background: #0f0f0f; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); z-index: 200; padding: 20px; text-align: left; box-shadow: 0 0 25px #000; box-sizing: border-box; overflow-y: auto; }
        #menu { left: -300px; border-right: 2px solid var(--mc); }
        #sett { right: -300px; border-left: 2px solid var(--mc); }
        .open#menu { left: 0; }
        .open#sett { right: 0; }

        .item { background: #1a1a1a; padding: 14px; border-radius: 12px; margin-bottom: 10px; cursor: pointer; border: 1px solid #333; font-weight: bold; }
        .sub-box { display: none; padding-left: 10px; margin-bottom: 10px; border-left: 2px solid #333; }
        .sub-btn { padding: 12px; color: #ccc; font-size: 14px; cursor: pointer; border-bottom: 1px solid #222; }

        .main { padding-top: 70px; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }
        .slot-machine { background: #0a0a0a; border: 3px solid var(--mc); border-radius: 35px; padding: 20px; display: inline-block; box-shadow: 0 0 40px var(--sh); margin: 0 auto; }
        .slots { font-size: 60px; margin: 10px 0; min-height: 80px; }
        
        .bet-input { background: #111; border: 2px solid var(--mc); color: #fff; padding: 12px; border-radius: 10px; width: 120px; font-size: 18px; text-align: center; margin: 5px 0; }
        .b-btn { background: #111; border: 1px solid var(--mc); color: var(--mc); padding: 8px 15px; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .b-btn.active { background: var(--mc); color: #000; box-shadow: 0 0 15px var(--sh); }
        .play-btn { background: var(--mc); color: #000; border: none; padding: 15px 50px; font-size: 22px; font-weight: 900; border-radius: 20px; cursor: pointer; margin-top: 10px; }

        #msg { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--mc); color: #000; padding: 10px 20px; border-radius: 25px; font-weight: bold; display: none; z-index: 1000; font-size: 13px; }
        
        .grid-select { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 10px 0; }
        .color-dot { width: 35px; height: 35px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; }
        .eff-dot { background: #222; border-radius: 8px; padding: 5px; text-align: center; font-size: 20px; cursor: pointer; border: 1px solid #444; }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div class="loader-content">
            <div style="font-size: 28px; letter-spacing: 2px;">GOLDEN BOT</div>
        </div>
    </div>

    <div id="msg"></div>
    <div class="header">
        <div class="menu-btn" onclick="toggleP('menu')">‚ò∞</div>
        <div class="sett-btn" onclick="toggleP('sett')">‚öôÔ∏è</div>
    </div>

    <div id="menu" class="side-panel">
        <h2 id="name-tag" style="margin-top:40px; color:#fff;">–ò–≥—Ä–æ–∫</h2>
        
        <div class="item" onclick="showSub('p-items')">üë§ –ü–†–û–§–ò–õ–¨</div>
        <div id="p-items" class="sub-box">
            <div class="sub-btn" onclick="showCrypto()">üí≥ –ü–û–ü–û–õ–ù–ò–¢–¨</div>
            <div class="sub-btn" onclick="withdraw()">üí∞ –í–´–í–û–î</div>
            <div class="sub-btn" onclick="showSub('v-items')">üí± –í–ê–õ–Æ–¢–ê</div>
            <div id="v-items" class="sub-box">
                <div class="sub-btn" onclick="setV('RUB')">‚ÇΩ RUB</div>
                <div class="sub-btn" onclick="setV('UAH')">‚Ç¥ UAH</div>
                <div class="sub-btn" onclick="setV('TON')">üíé TON</div>
            </div>
            <div class="sub-btn" onclick="promo()">üéÅ –ü–†–û–ú–û–ö–û–î</div>
        </div>

        <div class="item" onclick="showSub('color-items')">üé® –¶–í–ï–¢–ê –¢–ï–ú–´</div>
        <div id="color-items" class="sub-box">
            <div class="grid-select">
                <div onclick="setT('#ffd700')" class="color-dot" style="background:#ffd700;"></div> <div onclick="setT('#ff3333')" class="color-dot" style="background:#ff3333;"></div> <div onclick="setT('#22ff22')" class="color-dot" style="background:#22ff22;"></div> <div onclick="setT('#3388ff')" class="color-dot" style="background:#3388ff;"></div> <div onclick="setT('#ffffff')" class="color-dot" style="background:#ffffff;"></div> <div onclick="setT('#a020f0')" class="color-dot" style="background:#a020f0;"></div> </div>
        </div>

        <div class="item" onclick="showSub('eff-items')">‚ú® –≠–§–§–ï–ö–¢–´</div>
        <div id="eff-items" class="sub-box">
            <div class="grid-select">
                <div onclick="setE('üí∞')" class="eff-dot">üí∞</div>
                <div onclick="setE('üíé')" class="eff-dot">üíé</div>
                <div onclick="setE('üå∏')" class="eff-dot">üå∏</div>
                <div onclick="setE('‚ùÑÔ∏è')" class="eff-dot">‚ùÑÔ∏è</div>
                <div onclick="setE('üçÄ')" class="eff-dot">üçÄ</div>
                <div onclick="setE('üî•')" class="eff-dot">üî•</div>
            </div>
        </div>

        <button onclick="toggleP('menu')" class="item" style="margin-top:30px; width:100%; background:#333; color:#fff; border:none;">‚¨ÖÔ∏è –ù–ê–ó–ê–î</button>
    </div>

    <div id="sett" class="side-panel">
        <h2 style="margin-top:40px;">–ù–ê–°–¢–†–û–ô–ö–ò</h2>
        <div class="item">üá∑üá∫ –†–£–°–°–ö–ò–ô</div>
        <button onclick="toggleP('sett')" class="item" style="margin-top:30px; width:100%; background:#333; color:#fff; border:none;">–û–ö</button>
    </div>

    <div class="main">
        <div class="bal-box">
            <div style="font-size:14px; opacity:0.7;">–ë–ê–õ–ê–ù–°</div>
            <div style="font-size:36px; font-weight:900;"><span id="bal">15.00</span> <span id="v-sym">UAH</span></div>
        </div>
        <div class="slot-machine">
            <div class="slots" id="scr">üé∞üé∞üé∞</div>
            <input type="number" id="bet-val" class="bet-input" value="5">
            <div style="display:flex; justify-content:center; gap:8px; margin:10px 0;">
                <div class="b-btn active" id="x1" onclick="setX(1)">X1</div>
                <div class="b-btn" id="x2" onclick="setX(2)">X2</div>
                <div class="b-btn" id="x3" onclick="setX(3)">X3</div>
            </div>
            <button class="play-btn" id="p-btn" onclick="play()">–ò–ì–†–ê–¢–¨</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let bal = 15; let curX = 1; let curV = 'UAH';
        let currentEffect = 'üí∞';
        const rates = { 'UAH': 1, 'RUB': 2.5, 'TON': 0.005 };

        document.getElementById('name-tag').innerText = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.first_name : "–ò–≥—Ä–æ–∫";

        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('fade-out');
            }, 2500);
        });

        function toggleP(id) { 
            document.getElementById(id==='menu'?'sett':'menu').classList.remove('open');
            document.getElementById(id).classList.toggle('open'); 
        }

        function showSub(id) { 
            let e = document.getElementById(id); 
            e.style.display = (e.style.display==='block')?'none':'block'; 
        }

        function setT(c) { 
            document.documentElement.style.setProperty('--mc', c); 
            document.documentElement.style.setProperty('--sh', c+'66'); 
            msg("–¶–≤–µ—Ç –∏–∑–º–µ–Ω–µ–Ω!");
        }

        function setE(eff) { currentEffect = eff; msg("–≠—Ñ—Ñ–µ–∫—Ç: " + eff); }

        function setV(newV) {
            bal = (bal / rates[curV]) * rates[newV];
            curV = newV;
            document.getElementById('v-sym').innerText = curV;
            update();
        }

        function setX(x) {
            curX = x;
            document.querySelectorAll('.b-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('x'+x).classList.add('active');
        }

        function msg(t) { 
            let m = document.getElementById('msg'); m.innerText = t; 
            m.style.display = 'block'; setTimeout(()=>m.style.display='none', 2500); 
        }

        function play() {
            let bet = parseFloat(document.getElementById('bet-val').value);
            if (isNaN(bet) || bet <= 0 || bal < bet) { msg(bal < bet ? "–ú–ê–õ–û –°–†–ï–î–°–¢–í!" : "–°–¢–ê–í–ö–ê!"); return; }
            
            bal -= bet; update();
            let btn = document.getElementById('p-btn'); btn.disabled = true;
            let i = 0; const s = ['üíé', 'üí∞', '7Ô∏è‚É£', 'üçí', 'üçÄ'];
            
            const t = setInterval(() => {
                const r = [s[Math.floor(Math.random()*5)], s[Math.floor(Math.random()*5)], s[Math.floor(Math.random()*5)]];
                document.getElementById('scr').innerText = r.join('');
                if (++i >= 12) {
                    clearInterval(t); btn.disabled = false;
                    
                    // –õ–û–ì–ò–ö–ê –®–ê–ù–°–û–í –ò –ú–ù–û–ñ–ò–¢–ï–õ–Ø
                    let winLimit = 50 * rates[curV];
                    let chance = (bet < winLimit) ? 0.35 : 0.18;
                    if(curX === 2) chance *= 0.6;
                    if(curX === 3) chance *= 0.4;

                    if (Math.random() < chance) {
                        let w = s[Math.floor(Math.random()*5)];
                        document.getElementById('scr').innerText = w+w+w;
                        let winSum = bet * (2 + curX); // X1=3x, X2=4x, X3=5x
                        bal += winSum;
                        msg("–í–´–ò–ì–†–´–®: +" + winSum.toFixed(2));
                        tg.HapticFeedback.notificationOccurred('success');
                    }
                    update();
                }
            }, 100);
        }

        function update() { document.getElementById('bal').innerText = bal.toFixed(2); }

        function showCrypto() { alert("TON –ö–æ—à–µ–ª–µ–∫:\nUQBXsDXoFMFD3752_K-87KOPztj5KbTrQq9irD32bUEAMQ3L\n\n–ê–¥–º–∏–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç –æ–ø–ª–∞—Ç—É!"); }

        function withdraw() {
            let min = 100 * rates[curV];
            if(bal < min) { msg("–û–¢ " + min.toFixed(0) + " " + curV); return; }
            let w = prompt("–ö—É–¥–∞ –≤—ã–≤–æ–¥–∏–º (–ö–∞—Ä—Ç–∞/–ö–æ—à–µ–ª–µ–∫)?");
            if(w) alert("–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!");
        }

        function promo() {
            let p = prompt("–ü—Ä–æ–º–æ–∫–æ–¥:"); if(!p) return;
            let c = p.toUpperCase();
            if(c==='JACKPOT') { bal += (1000*rates[curV]); msg("+1000 " + curV); }
            else if(c==='TON') { bal += (500*rates[curV]); msg("+500 " + curV); }
            else msg("–ù–ï–¢ –¢–ê–ö–û–ì–û"); update();
        }

        // –≠–§–§–ï–ö–¢–´ –ß–ê–°–¢–ò–¶
        setInterval(() => {
            const p = document.createElement('div'); p.className = 'particle';
            p.innerText = currentEffect; 
            p.style.left = Math.random()*100+'vw';
            p.style.animationDuration = (Math.random()*2+3)+'s';
            document.body.appendChild(p); setTimeout(()=>p.remove(), 5000);
        }, 450);

        update(); tg.expand();
    </script>
</body>
            </html>
                    
