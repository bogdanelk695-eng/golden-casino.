<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --mc: #ffd700; --bg: #0b0b0b; }
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; outline: none; user-select: none; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; height: 100vh; }
        
        #bg-fx { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .particle { position: absolute; top: -30px; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        .ui-wrapper { position: relative; z-index: 10; height: 100vh; display: flex; flex-direction: column; }
        .header { height: 60px; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; background: rgba(0,0,0,0.9); border-bottom: 2px solid var(--mc); }
        
        .panel { position: fixed; top: 0; width: 100%; height: 100%; background: var(--bg); z-index: 200; transition: 0.4s; padding: 70px 20px; display: none; overflow-y: auto; }
        .panel.active { display: block; }
        .left { left: -100%; } .left.active { left: 0; }
        .right { right: -100%; } .right.active { right: 0; }

        .card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 15px; margin-bottom: 10px; border-left: 4px solid var(--mc); }
        .btn { background: var(--mc); color: #000; border: none; padding: 14px; border-radius: 12px; font-weight: 900; width: 100%; cursor: pointer; margin-top: 10px; }
        .inp { background: #1a1a1a; border: 1px solid var(--mc); color: #fff; padding: 12px; border-radius: 10px; width: 100%; margin: 5px 0; text-align: center; font-size: 18px; }

        /* –ö–û–õ–ï–°–û 8 –°–õ–û–¢–û–í */
        .wheel-wrap { position: relative; width: 240px; height: 240px; margin: 20px auto; }
        .wheel-body { 
            width: 100%; height: 100%; border: 6px solid var(--mc); border-radius: 50%; 
            position: relative; transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); 
            background: #111; overflow: hidden; box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .wheel-line { 
            position: absolute; width: 2px; height: 50%; background: var(--mc); 
            left: calc(50% - 1px); top: 0; transform-origin: bottom center; opacity: 0.4; 
        }
        .wheel-sector { 
            position: absolute; width: 100%; height: 100%; text-align: center; 
            font-size: 10px; font-weight: 900; padding-top: 20px; text-transform: uppercase;
        }
        .pointer { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); color: #ff3333; font-size: 40px; z-index: 50; filter: drop-shadow(0 0 5px #000); }

        #toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: var(--mc); color: #000; padding: 10px 25px; border-radius: 30px; font-weight: 900; display: none; z-index: 3000; }
    </style>
</head>
<body>
    <div id="bg-fx"></div>
    <div id="toast"></div>

    <div class="ui-wrapper">
        <div class="header">
            <div onclick="openP('menu-l')" style="font-size:25px">‚ò∞</div>
            <div style="font-weight:900">GOLDEN BOT</div>
            <div onclick="openP('admin-p')" style="font-size:25px">üíé</div>
        </div>
        <div style="text-align:center; padding-top:40px">
            <div style="opacity:0.6; font-size:12px">–ë–ê–õ–ê–ù–°</div>
            <div style="font-size:45px; font-weight:900; color:var(--mc)"><span id="bal">0.00</span> UAH</div>
            <button class="btn" style="width:80%; height:60px; font-size:20px; margin-top:20px" onclick="openP('wheel-game')">üé° –ò–ì–†–ê–¢–¨</button>
        </div>
    </div>

    <div id="wheel-game" class="panel left">
        <h3 style="text-align:center">üé° –ö–û–õ–ï–°–û –§–û–†–¢–£–ù–´</h3>
        <div class="wheel-wrap">
            <div class="pointer">‚ñº</div>
            <div id="w-obj" class="wheel-body">
                <div class="wheel-line" style="transform: rotate(0deg)"></div>
                <div class="wheel-line" style="transform: rotate(45deg)"></div>
                <div class="wheel-line" style="transform: rotate(90deg)"></div>
                <div class="wheel-line" style="transform: rotate(135deg)"></div>
                <div class="wheel-line" style="transform: rotate(180deg)"></div>
                <div class="wheel-line" style="transform: rotate(225deg)"></div>
                <div class="wheel-line" style="transform: rotate(270deg)"></div>
                <div class="wheel-line" style="transform: rotate(315deg)"></div>
                <div class="wheel-sector" style="transform: rotate(22.5deg)">WIN x2</div>
                <div class="wheel-sector" style="transform: rotate(67.5deg)">–ü–£–°–¢–û</div>
                <div class="wheel-sector" style="transform: rotate(112.5deg)">WIN x2</div>
                <div class="wheel-sector" style="transform: rotate(157.5deg)">–ü–£–°–¢–û</div>
                <div class="wheel-sector" style="transform: rotate(202.5deg)">WIN x2</div>
                <div class="wheel-sector" style="transform: rotate(247.5deg)">–ü–£–°–¢–û</div>
                <div class="wheel-sector" style="transform: rotate(292.5deg)">WIN x2</div>
                <div class="wheel-sector" style="transform: rotate(337.5deg)">–ü–£–°–¢–û</div>
            </div>
        </div>
        <div class="card">
            <p style="margin:0; opacity:0.6">–í–ê–®–ê –°–¢–ê–í–ö–ê:</p>
            <input type="number" id="w-bet" class="inp" value="10">
            <button class="btn" id="w-btn" onclick="playWheel()">–ö–†–£–¢–ò–¢–¨</button>
        </div>
        <button class="btn" style="background:#333; color:#fff" onclick="closeP()">–ù–ê–ó–ê–î</button>
    </div>

    <div id="menu-l" class="panel left">
        <div class="card">
            <h2 id="u-name">–ò–≥—Ä–æ–∫</h2>
            <p>ID: <span id="u-id">000</span></p>
        </div>
        <button class="btn" onclick="resetBal()">–°–ë–†–û–°–ò–¢–¨ –ë–ê–õ–ê–ù–° (100)</button>
        <button class="btn" style="background:#333; color:#fff" onclick="closeP()">–ó–ê–ö–†–´–¢–¨</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let bal = 0;

        function saveData() { localStorage.setItem('gb_bal', bal); }
        function loadData() {
            bal = parseFloat(localStorage.getItem('gb_bal'));
            if (isNaN(bal)) bal = 100.0;
            updateUI();
        }

        function updateUI() { document.getElementById('bal').innerText = bal.toFixed(2); }
        function openP(id) { 
            document.querySelectorAll('.panel').forEach(p => { p.classList.remove('active'); p.style.display='none'; });
            let el = document.getElementById(id); el.style.display='block';
            setTimeout(() => el.classList.add('active'), 10);
        }
        function closeP() { document.querySelectorAll('.panel').forEach(p => p.classList.remove('active')); }
        function msg(t) { let b = document.getElementById('toast'); b.innerText = t; b.style.display = 'block'; setTimeout(() => b.style.display = 'none', 2000); }

        function playWheel() {
            let bet = parseFloat(document.getElementById('w-bet').value);
            if(bal < bet || bet <= 0) return msg("–ú–ê–õ–û –°–†–ï–î–°–¢–í");
            
            let btn = document.getElementById('w-btn');
            if(btn.disabled) return;
            
            bal -= bet; updateUI(); saveData();
            btn.disabled = true;

            let w = document.getElementById('w-obj');
            let isWin = Math.random() < 0.5; // 50% —à–∞–Ω—Å (4 –∏–∑ 8)
            
            // –í—ã–±–∏—Ä–∞–µ–º –æ–¥–∏–Ω –∏–∑ 4 –ø–æ–±–µ–¥–Ω—ã—Ö –∏–ª–∏ 4 –ø—É—Å—Ç—ã—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤
            let sectors = isWin ? [22.5, 112.5, 202.5, 292.5] : [67.5, 157.5, 247.5, 337.5];
            let targetAngle = sectors[Math.floor(Math.random()*sectors.length)];
            
            // –ö—Ä—É—Ç–∏–º –º–∏–Ω–∏–º—É–º 5 –æ–±–æ—Ä–æ—Ç–æ–≤ (1800 –≥—Ä–∞–¥) + –ø–æ–ø–∞–¥–∞–µ–º –≤ —Å–µ–∫—Ç–æ—Ä
            // –í—ã—á–∏—Ç–∞–µ–º targetAngle –∏–∑ 3600, —Ç–∞–∫ –∫–∞–∫ –≤—Ä–∞—â–µ–Ω–∏–µ –∏–¥–µ—Ç –ø–æ —á–∞—Å–æ–≤–æ–π, –∞ —Å–µ–∫—Ç–æ—Ä–∞ —Å—á–∏—Ç–∞—é—Ç—Å—è –ø—Ä–æ—Ç–∏–≤
            let finalDeg = 3600 - targetAngle; 
            
            w.style.transform = `rotate(${finalDeg}deg)`;

            setTimeout(() => {
                w.style.transition = 'none';
                w.style.transform = `rotate(${finalDeg % 360}deg)`;
                setTimeout(() => w.style.transition = 'transform 4s cubic-bezier(0.15, 0, 0.15, 1)', 50);
                
                if(isWin) {
                    bal += bet * 2;
                    msg("–ü–û–ë–ï–î–ê x2!");
                } else {
                    msg("–ü–†–û–ò–ì–†–´–®");
                }
                updateUI(); saveData();
                btn.disabled = false;
            }, 4100);
        }

        function resetBal() { bal = 100.0; saveData(); updateUI(); msg("–ë–∞–ª–∞–Ω—Å 100 UAH"); }

        window.onload = () => {
            tg.expand();
            document.getElementById('u-name').innerText = tg.initDataUnsafe.user?.first_name || "Gamer";
            loadData();
        };
    </script>
</body>
</html>
