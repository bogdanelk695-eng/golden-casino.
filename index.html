<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --mc: #ffd700; --sh: rgba(255, 215, 0, 0.4); }
        body { background: #000; color: var(--mc); text-align: center; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; transition: 0.3s; }
        .particle { position: absolute; top: -20px; user-select: none; z-index: -1; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(105vh) rotate(360deg); } }

        /* –®–∞–ø–∫–∞ */
        .header { position: fixed; top: 0; width: 100%; height: 60px; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; z-index: 100; box-sizing: border-box; }
        .menu-btn, .sett-btn { font-size: 28px; cursor: pointer; text-shadow: 0 0 10px var(--sh); }
        
        /* –ü–∞–Ω–µ–ª–∏ (–ú–µ–Ω—é –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∏) */
        .side-panel { position: fixed; top: 0; width: 250px; height: 100%; background: #111; transition: 0.4s; z-index: 200; padding: 20px; text-align: left; box-shadow: 0 0 20px #000; }
        #menu { left: -300px; border-right: 2px solid var(--mc); }
        #settings { right: -300px; border-left: 2px solid var(--mc); }
        #menu.open { left: 0; }
        #settings.open { right: 0; }

        .item { background: #222; padding: 12px; border-radius: 12px; margin-bottom: 10px; cursor: pointer; border: 1px solid #333; }
        .sub-item { padding: 8px 15px; color: #aaa; font-size: 14px; border-bottom: 1px solid #222; }

        /* –ò–≥—Ä–∞ */
        .main { padding-top: 80px; }
        .slot-machine { background: #111; border: 3px solid var(--mc); border-radius: 30px; padding: 20px; display: inline-block; box-shadow: 0 0 30px var(--sh); }
        .slots { font-size: 65px; margin: 15px 0; letter-spacing: 5px; }
        
        /* –°—Ç–∞–≤–∫–∏ –∏ X-—ã */
        .bet-row { display: flex; justify-content: center; gap: 8px; margin: 10px 0; }
        .btn-mini { background: #1a1a1a; border: 1px solid var(--mc); color: var(--mc); padding: 5px 12px; border-radius: 8px; font-size: 14px; }
        .btn-mini.active { background: var(--mc); color: #000; font-weight: bold; }

        .spin-btn { background: var(--mc); color: #000; border: none; padding: 15px 50px; font-size: 22px; font-weight: 900; border-radius: 18px; cursor: pointer; margin-top: 10px; }
        
        /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
        #game-msg { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: var(--mc); color: #000; padding: 10px 20px; border-radius: 20px; font-weight: bold; display: none; z-index: 300; }
    </style>
</head>
<body>
    <div id="game-msg"></div>

    <div class="header">
        <div class="menu-btn" onclick="toggleP('menu')">‚ò∞</div>
        <div class="sett-btn" onclick="toggleP('settings')">‚öôÔ∏è</div>
    </div>

    <div id="menu" class="side-panel">
        <h2 id="u-name">–ò–≥—Ä–æ–∫</h2>
        <div class="item" onclick="toggleSub('prof-items')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
        <div id="prof-items" style="display:none">
            <div class="sub-item" onclick="showMsg('–í—ã–≤–æ–¥ –æ—Ç 1000')">üí∞ –í—ã–≤–æ–¥</div>
            <div class="sub-item" onclick="toggleSub('curr-items')">üí± –°–º–µ–Ω–∞ –≤–∞–ª—é—Ç—ã</div>
            <div id="curr-items" style="display:none; padding-left:10px;">
                <div class="sub-item" onclick="setCur('RUB')">üá∑üá∫ –†—É–±–ª–∏</div>
                <div class="sub-item" onclick="setCur('UAH')">üá∫üá¶ –ì—Ä–∏–≤–Ω—ã</div>
                <div class="sub-item" onclick="setCur('USD')">üá∫üá∏ –î–æ–ª–ª–∞—Ä—ã</div>
                <div class="sub-item" onclick="setCur('TON')">üíé TON Crystal</div>
            </div>
            <div class="sub-item" onclick="promo()">üéÅ –ü—Ä–æ–º–æ–∫–æ–¥</div>
        </div>

        <div style="margin-top:20px; font-size:12px; color:#555;">–¢–ï–ú–ê –î–ò–ó–ê–ô–ù–ê:</div>
        <div style="display:flex; gap:10px; margin-top:10px;">
            <div onclick="setT('#ffd700')" style="width:30px;height:30px;background:#ffd700;border-radius:50%"></div>
            <div onclick="setT('#a020f0')" style="width:30px;height:30px;background:#a020f0;border-radius:50%"></div>
            <div onclick="setT('#00ff00')" style="width:30px;height:30px;background:#00ff00;border-radius:50%"></div>
            <div onclick="setT('#008cff')" style="width:30px;height:30px;background:#008cff;border-radius:50%"></div>
        </div>
    </div>

    <div id="settings" class="side-panel">
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
        <p style="font-size:12px; color:#555;">–Ø–ó–´–ö / LANGUAGE:</p>
        <div class="item" onclick="setLang('RU')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</div>
        <div class="item" onclick="setLang('UA')">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</div>
        <div class="item" onclick="setLang('BY')">üáßüáæ –ë–µ–ª–∞—Ä—É—Å–∫–∞—è</div>
        <div class="item" onclick="setLang('KZ')">üá∞üáø “ö–∞–∑–∞“õ—à–∞</div>
        <div class="item" onclick="setLang('EN')">üá∫üá∏ English</div>
        <button onclick="toggleP('settings')" style="width:100%; padding:10px; margin-top:20px; background:#333; color:#fff; border:none; border-radius:10px;">–û–ö</button>
    </div>

    <div class="main">
        <div style="font-size:18px; margin-bottom:5px;">–ë–ê–õ–ê–ù–°:</div>
        <div style="font-size:32px; font-weight:bold; margin-bottom:15px;"><span id="bal">100</span> <span id="cur-sym">G</span></div>
        
        <div class="slot-machine">
            <div class="slots" id="scr">üé∞üé∞üé∞</div>
            
            <div style="font-size:12px; color:#888;">–°–£–ú–ú–ê:</div>
            <div class="bet-row">
                <div class="btn-mini active" onclick="setB(10, this)">10</div>
                <div class="btn-mini" onclick="setB(50, this)">50</div>
                <div class="btn-mini" onclick="setB(100, this)">100</div>
            </div>

            <div style="font-size:12px; color:#888;">–ú–ù–û–ñ–ò–¢–ï–õ–¨ (–†–ò–°–ö):</div>
            <div class="bet-row">
                <div class="btn-mini active" onclick="setX(1, this)">X1</div>
                <div class="btn-mini" onclick="setX(2, this)">X2</div>
                <div class="btn-mini" onclick="setX(3, this)">X3</div>
            </div>

            <button class="spin-btn" id="sp-btn" onclick="spin()">–ò–ì–†–ê–¢–¨</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let bal = 100; let curB = 10; let curX = 1; let curSym = 'G';
        
        function toggleP(id) { document.getElementById(id).classList.toggle('open'); }
        function toggleSub(id) { let e = document.getElementById(id); e.style.display = e.style.display==='none'?'block':'none'; }
        
        function setT(c) { document.documentElement.style.setProperty('--mc', c); document.documentElement.style.setProperty('--sh', c+'66'); }
        function setB(v, el) { curB = v; selectBtn(el, '.bet-row:first-of-type .btn-mini'); }
        function setX(v, el) { curX = v; selectBtn(el, '.bet-row:last-of-type .btn-mini'); }
        function selectBtn(el, sel) { document.querySelectorAll(sel).forEach(b => b.classList.remove('active')); el.classList.add('active'); }
        
        function setCur(s) { curSym = s; document.getElementById('cur-sym').innerText = s; toggleSub('curr-items'); }
        function showMsg(t) { 
            let m = document.getElementById('game-msg'); m.innerText = t; m.style.display = 'block';
            setTimeout(() => m.style.display = 'none', 2500);
        }

        function spin() {
            if (bal < curB) { showMsg("–ú–∞–ª–æ —Å—Ä–µ–¥—Å—Ç–≤!"); return; }
            bal -= curB; updateUI();
            let btn = document.getElementById('sp-btn'); btn.disabled = true;
            
            let i = 0; const s = ['üíé', 'üí∞', '7Ô∏è‚É£', 'üçí', 'üçÄ'];
            const t = setInterval(() => {
                const r = [s[Math.floor(Math.random()*5)], s[Math.floor(Math.random()*5)], s[Math.floor(Math.random()*5)]];
                document.getElementById('scr').innerText = r.join('');
                if (++i >= 12) {
                    clearInterval(t); btn.disabled = false;
                    
                    // –®–ê–ù–°–´: –ë–∞–∑–æ–≤—ã–π 30%, X2 -> 15%, X3 -> 7%
                    let chance = 0.3;
                    if(curX === 2) chance = 0.15;
                    if(curX === 3) chance = 0.07;

                    if (Math.random() < chance) {
                        let winSym = s[Math.floor(Math.random()*5)];
                        document.getElementById('scr').innerText = winSym + winSym + winSym;
                        let winVal = curB * (3 + curX);
                        bal += winVal;
                        showMsg("–í–´–ò–ì–†–´–®: +" + winVal + " " + curSym);
                        tg.HapticFeedback.notificationOccurred('success');
                    }
                    updateUI();
                }
            }, 80);
        }

        function updateUI() { document.getElementById('bal').innerText = bal; }
        function setLang(l) { showMsg("–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ " + l); toggleP('settings'); }
        function promo() { let p = prompt("–ö–æ–¥:"); if(p && p.toUpperCase()==='TON') { bal+=500; updateUI(); showMsg("+500 G"); } }

        setInterval(() => {
            const p = document.createElement('div'); p.className = 'particle';
            p.innerText = curSym === 'TON' ? 'üíé' : 'G'; p.style.left = Math.random()*100+'vw';
            p.style.animationDuration = (Math.random()*3+2)+'s';
            document.body.appendChild(p); setTimeout(() => p.remove(), 5000);
        }, 400);
        updateUI();
    </script>
</body>
                    </html>
                    
