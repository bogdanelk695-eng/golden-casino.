<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --mc: #ffd700; --sh: rgba(255, 215, 0, 0.4); }
        body { background: #000; color: var(--mc); text-align: center; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; transition: 0.3s; }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç—ã —Ñ–æ–Ω–∞ */
        .particle { position: absolute; top: -20px; user-select: none; z-index: -1; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(105vh) rotate(360deg); } }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .header { position: fixed; top: 0; width: 100%; height: 60px; display: flex; align-items: center; padding: 0 15px; z-index: 100; }
        .menu-btn { font-size: 28px; cursor: pointer; }
        
        /* –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é */
        #menu { position: fixed; top: 0; left: -280px; width: 240px; height: 100%; background: #111; border-right: 2px solid var(--mc); transition: 0.4s; z-index: 200; padding: 20px; text-align: left; box-shadow: 5px 0 15px #000; }
        #menu.open { left: 0; }
        .menu-item { background: #222; padding: 12px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #333; cursor: pointer; transition: 0.2s; }
        .menu-item:active { background: #333; }

        /* –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å */
        .main { padding-top: 80px; }
        .balance-display { font-size: 24px; font-weight: bold; margin-bottom: 10px; text-shadow: 0 0 10px var(--sh); }
        .slot-machine { background: #111; border: 4px solid var(--mc); border-radius: 25px; padding: 20px; display: inline-block; box-shadow: 0 0 30px var(--sh); }
        .slots { font-size: 60px; margin: 20px 0; min-width: 200px; height: 80px; }
        
        /* –°—Ç–∞–≤–∫–∏ */
        .bet-box { margin: 15px 0; display: flex; justify-content: center; gap: 10px; }
        .bet-btn { background: #222; border: 1px solid var(--mc); color: var(--mc); padding: 8px 15px; border-radius: 8px; cursor: pointer; }
        .bet-btn.active { background: var(--mc); color: #000; font-weight: bold; }

        .spin-btn { background: var(--mc); color: #000; border: none; padding: 15px 40px; font-size: 22px; font-weight: 900; border-radius: 15px; cursor: pointer; box-shadow: 0 4px 0 #8b6508; }
        .spin-btn:disabled { opacity: 0.5; transform: translateY(2px); }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –º–µ–Ω—é */
        .sett-label { font-size: 14px; color: #888; margin: 10px 0 5px; }
        .color-dots { display: flex; gap: 8px; margin-bottom: 15px; }
        .dot { width: 25px; height: 25px; border-radius: 50%; border: 1px solid #fff; cursor: pointer; }
    </style>
</head>
<body>
    <div class="header"><div class="menu-btn" onclick="toggleM()">‚ò∞</div></div>

    <div id="menu">
        <h2 id="u-name" style="color:#fff; margin-bottom:5px;">–ò–≥—Ä–æ–∫</h2>
        <div class="menu-item" onclick="view('prof')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
        <div id="prof-sub" style="display:none; padding-left:15px;">
            <div class="menu-item" onclick="tgAlert('–í—ã–≤–æ–¥ –æ—Ç 1000 G')">üí∞ –í—ã–≤–æ–¥</div>
            <div class="menu-item" onclick="tgAlert('–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ')">üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å</div>
            <div class="menu-item" onclick="promo()">üéÅ –ü—Ä–æ–º–æ–∫–æ–¥</div>
        </div>

        <div class="sett-label">–¶–í–ï–¢ –¢–ï–ú–´:</div>
        <div class="color-dots">
            <div class="dot" style="background:#ffd700" onclick="setT('#ffd700')"></div>
            <div class="dot" style="background:#00ff00" onclick="setT('#00ff00')"></div>
            <div class="dot" style="background:#008cff" onclick="setT('#008cff')"></div>
            <div class="dot" style="background:#ff3333" onclick="setT('#ff3333')"></div>
        </div>

        <div class="sett-label">–≠–§–§–ï–ö–¢–´:</div>
        <select onchange="setEff(this.value)" style="width:100%; padding:8px; background:#222; color:#fff; border-radius:8px;">
            <option value="G">–ó–æ–ª–æ—Ç—ã–µ –º–æ–Ω–µ—Ç—ã</option>
            <option value="‚ùÑÔ∏è">–°–Ω–µ–∂–∏–Ω–∫–∏</option>
            <option value="üå∏">–°–∞–∫—É—Ä–∞</option>
            <option value="üçÄ">–ö–ª–µ–≤–µ—Ä</option>
        </select>

        <button class="btn" onclick="toggleM()" style="margin-top:30px; width:100%; padding:10px; background:#333; color:#fff; border:none; border-radius:10px;">–ó–ê–ö–†–´–¢–¨</button>
    </div>

    <div class="main">
        <div class="balance-display">–ë–ê–õ–ê–ù–°: <span id="bal">100</span> G</div>
        <div class="slot-machine">
            <div class="slots" id="screen">üé∞üé∞üé∞</div>
            <div class="bet-box">
                <div class="bet-btn active" onclick="setBet(10, this)">10</div>
                <div class="bet-btn" onclick="setBet(50, this)">50</div>
                <div class="bet-btn" onclick="setBet(100, this)">100</div>
            </div>
            <button class="spin-btn" id="s-btn" onclick="play()">–ö–†–£–¢–ò–¢–¨</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let bal = 100; let curBet = 10; let curEff = 'G';
        document.getElementById('u-name').innerText = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.first_name : "–ò–≥—Ä–æ–∫";

        function toggleM() { document.getElementById('menu').classList.toggle('open'); }
        function view(id) { let s = document.getElementById('prof-sub'); s.style.display = s.style.display === 'none' ? 'block' : 'none'; }
        function tgAlert(t) { tg.showAlert(t); }

        function setT(c) {
            document.documentElement.style.setProperty('--mc', c);
            document.documentElement.style.setProperty('--sh', c + '66');
        }

        function setEff(v) { curEff = v; }
        function setBet(v, el) {
            curBet = v;
            document.querySelectorAll('.bet-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
        }

        function play() {
            if (bal < curBet) { tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!"); return; }
            bal -= curBet; updateUI();
            let btn = document.getElementById('s-btn'); btn.disabled = true;
            
            let count = 0;
            const symbols = ['üíé', 'üí∞', '7Ô∏è‚É£', 'üçí', 'üçÄ'];
            const roll = setInterval(() => {
                const res = [symbols[Math.floor(Math.random()*5)], symbols[Math.floor(Math.random()*5)], symbols[Math.floor(Math.random()*5)]];
                document.getElementById('screen').innerText = res.join('');
                if (++count >= 12) {
                    clearInterval(roll);
                    btn.disabled = false;
                    // –®–ê–ù–° 37% –Ω–∞ –ø–æ–±–µ–¥—É
                    if (Math.random() < 0.37) {
                        const winSym = symbols[Math.floor(Math.random()*5)];
                        document.getElementById('screen').innerText = winSym + winSym + winSym;
                        bal += curBet * 4;
                        tg.HapticFeedback.notificationOccurred('success');
                        tg.showAlert("–ü–û–ë–ï–î–ê! +" + (curBet * 4) + " G");
                    }
                    updateUI();
                }
            }, 80);
        }

        function updateUI() { document.getElementById('bal').innerText = bal; }

        function promo() {
            let c = prompt("–í–≤–µ–¥–∏ –∫–æ–¥:");
            if (c && c.toUpperCase() === "BOGDAN_BOSS") { bal += 5000; updateUI(); tgAlert("–ë–æ—Å—Å –≤ –∑–¥–∞–Ω–∏–∏! +5000 G"); }
        }

        setInterval(() => {
            const p = document.createElement('div'); p.className = 'particle';
            p.innerText = curEff; p.style.left = Math.random() * 100 + 'vw';
            p.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(p); setTimeout(() => p.remove(), 5000);
        }, 400);
        updateUI();
    </script>
</body>
</html>
